#: import FadeTransition kivy.uix.screenmanager.FadeTransition

Screen_Management:
    id: screen_management
    transition: FadeTransition()

    mc: mainS
    Main_Screen:
        id: mainS
        name: "main_screen_name"
        manager: screen_management
    Route_Screen:
        name: "route_input_screen_name"
        manager: screen_management
    Race_Setup_Screen:
        name: "race_setup_screen_name"
        manager: screen_management
    Routes_List_Screen:
    	name: "route_list_name"
    	manager: screen_management
    Save_File_Text_Input_Screen:
        name: "save_file_text_input_screen_name"
        manager: screen_management
    Input_Target_Speed_Screen:
        name: "input_target_speed_screen_name"
        manager: screen_management
    Static_Message:
        name: "screen_to_show_static_message"
        manager: screen_management
    File_List_To_Save_Usb:
        name: "file_list_to_save_usb_screen_name"
        mananger: screen_management
    Confirmation_Screen_to_Save:
        name: "screen_to_confirm_save"
        manager: screen_management
    Confirmation_Screen_To_Load:
        name: "screen_to_confirm_load"
        mananger: screen_management
    Confirmation_Screen_To_Delete:
        name: "screen_to_confirm_delete"
        mananger: screen_management
    Confirmation_Save_List_Screen:
        name: "confirm_save_in_usb"
        manager: screen_management
    Confirmation_Delete_List_Screen:
        name: "confirm_delete_in_usb"
        manager: screen_management

##############################################################
##############################################################

<Static_Message>:
    canvas:
        Color:
            rgb: [.30, .30, .30]
        Rectangle:
            pos: self.pos
            size: self.size
    Button:
        background_color: .52, .52, .52, 1
        bold: 1
        color: .0078,.67,.69,1
        size_hint: 1, .5
        pos_hint: {"x": 0, "y": .5}
        text: root.update_val.message 
        font_size: 60
    BoxLayout:
        orientation: 'horizontal'
        Button:
            background_color: .52, .52, .52, 1
            color: .0078,.67,.69,1
            bold: 1
            size_hint: 1, .5
            text: "OK"
            font_size: 120
            on_release: if  (app.message_selected == 0): app.root.current = "save_file_text_input_screen_name"
            on_release: if  (app.message_selected == 1 or app.message_selected == 2): app.root.current = "route_input_screen_name"
            on_release: if  (app.message_selected == 4 or app.message_selected == 6 or app.message_selected == 3 or app.message_selected == 7): app.root.current = "route_list_name"
            on_release: if  (app.message_selected == 5 or app.message_selected == 9): app.root.current = "route_input_screen_name" #"race_setup_screen_name"
            on_release: if  (app.message_selected == 8 or app.message_selected == 10 or app.message_selected == 11): app.root.current = "file_list_to_save_usb_screen_name"
            on_release: if  (app.message_selected == 14): app.root.current = "input_target_speed_screen_name"
            
##############################################################
##############################################################

# Screen 1: Main Screen
<Main_Screen>:
    #button_color: color_button
    button: box 
    canvas:
        Color:
            rgb: [.30, .30, .30]
        Rectangle:
            pos: self.pos
            size: self.size
    label_wid: my_custom_button
    toggle_button_object: toggle_button
    BoxLayout:
        id: box
        orientation: 'vertical'
        # SPEED REFERENCE BUTTON
        ToggleButton:
            id: toggle_button
            disabled: root.update_val.enable_toggle_button
            background_disabled_down: ('0.00.00,000')
            background_color: .52, .52, .52, 1
            bold: 1
            color: .0078,.67,.69,1
            font_size: 60
            text: "REF: RPM"
            #pos_hint: {'x': .6}
            #size_hint: [.4, 1]
            pos_hint: {'x': .7}
            size_hint: [.3, 1]
            on_state: toggle_button.text = "REF: GPS" if self.state == 'down' else 'REF: RPM'
            on_state: root.pressed_button() if self.state == 'down' else root.unpressed_button()


        Button:
            id: timer_indicator
            background_disabled_down: ('0.00.00,000')
            background_color: .52, .52, .52, 1
            bold: 1
            color: .0078,.67,.69,1
            font_size: 100
            text: root.update_val.timer_update  # race time
            pos_hint: {'x': .2}
            size_hint: [.8, 1]

        # Average MPH Indicator
        Button:
            background_color: .52, .52, .52, 1
            bold: 1
            color: .0078,.67,.69,1
            font_size: 100
            text: root.update_val.count_down_up
            pos_hint: {'x': .2}
            size_hint: [.8, 1]

        # Distance Traveled Indicator
        Button:
            background_color: .52, .52, .52, 1
            bold: 1
            color: .0078,.67,.69,1
            font_size: 100
            text: root.update_val.dist_travel
            pos_hint: {'x': .2}
            size_hint: [.8, 1]

        


        # Speed Comparison Indicator
        Button:
            id: my_custom_button
            background_color: .52, .52, .52, 1
            bold: 1
            color: root.update_val.current_color
            font_size: 100
            text: root.update_val.current_value
            pos_hint: {'x': .2}
            size_hint: [.8, 1]
    
    # GPS Seconds indicator
    Button:
        background_color: .52, .52, .52, 1
        bold: 1
        color: .0078,.67,.69,1
        font_size: 45
        text: root.update_val.timer_2show_screen
        #pos_hint: {'x': .5, 'y': .8}
        pos_hint: {'x': .45, 'y': .8}
        #size_hint: .4, .2
        #size_hint: .2, .2
        size_hint: .25, .2
        width: 150

    # 1 Min / 30 Seconds reference for GPS
    Button:
        background_color: .52, .52, .52, 1
        bold: 1
        color: .0078,.67,.69,1
        font_size: 60
        text: root.update_val.switch_ref
        pos_hint: {'x': .2, 'y': .8}
        #size_hint: .4, .2
        #size_hint: .3, .2
        size_hint: .25, .2
        width: 150

    # MODE SELECTION
    #ToggleButton:
    Button:
        id: toggle_button_mode
        background_disabled_down: ('0.00.00,000')
        background_color: .52, .52, .52, 1
        bold: 1
        color: .0078,.67,.69,1
        font_size: 40
        #text: "RACE\nSETUP\nMODE"
        text: root.update_val.rpi_temp
        size_hint: .2, .3333
        pos_hint: {'x':0, 'y': .3333}
        #size_hint: .2, .5
        #pos_hint: {"x": 0, "y": .5}
        #on_state: toggle_button_mode.text = "RACE\nMODE" if self.state == 'down' else 'RACE\nSETUP\nMODE'
        #on_state: root.race_mode() if self.state == 'down' else root.race_setup_mode()

    # Go to Inputs Screen
    Button:
        background_color: .52, .52, .52, 1
        bold: 1
        color: .0078,.67,.69,1
        #size_hint: .2, .5
        #pos_hint: {"x": 0, "y": 0}
        size_hint: .2, .3333
        pos_hint: {'x':0, 'y': 0}
        on_release: app.root.current = "route_input_screen_name"
        text: " INPUTS \n       ->"
        font_size: 30

    # GPS Position
    Button:
        #background_down: '/images/defaulttheme/button'
        #background_down: 'atlas://data/images/defaulttheme/button_pressed'
        #background_down: 'atlas://data/images/defaulttheme/button_disabled'
        #background_color: root.update_val.gps_color #.52, .52, .52, 1
        #background_normal: root.update_val.full_color#''
        #background_down: ''
        background_color: .52, .52, .52, 1
        #background_normal: ''
        bold: 1
        color: .0078,.67,.69,1
        size_hint: .2, .3333 #.2, .5
        pos_hint: {'x':0, 'y': 0.6666}#{"x": 0, "y": 0}
        text: root.update_val.text_gps #"   NOT IN \nPOSITION"
        font_size: 30
        #on_press: root.show_popup()
        #size_hint: .2, .3333
        #pos_hint: {'x':0, 'y': .3333}
    
            #color: root.update_val.current_color
            #font_size: 100
            #text: root.update_val.current_value
    #Button:
    #    #id: timer_indicator
    #    background_disabled_down: ('0.00.00,000')
    #    background_color: .52, .52, .52, 1
    #    bold: 1
    #    color: .0078,.67,.69,1
    #    font_size: 100
    #    text: "ROUTE"#root.update_val.timer_update  # race time
    #    pos_hint: {'x': .2}
    #    size_hint: [.8, 1]

##############################################################
##############################################################

# Screen 3: Route Screen
<Route_Screen>:
    canvas:
        Color:
            rgb: [.30, .30, .30]
        Rectangle:
            pos: self.pos
            size: self.size

    Button:
        background_color: .52, .52, .52, 1
        bold: 1
        color: .0078,.67,.69,1
        font_size: 30
        size_hint: .2, .3333
        #size_hint: .2, .5
        text: "INPUTS \n      <-"
        pos_hint: {'x':0, 'y': .3333}
        #pos_hint: {'x':0, 'y': 0}
        on_release: app.root.current = "main_screen_name"
    Button:
        background_color: .52, .52, .52, 1
        bold: 1
        color: .0078,.67,.69,1
        font_size: 30
        size_hint: .2, .3333
        #size_hint: .2, .5
        text: " RACE\nSETUP \n     ->"
        pos_hint: {'x':0, 'y': .6666}
        #pos_hint: {'x':0, 'y': .5}
        on_release: app.root.current = "race_setup_screen_name"
    Button:
        background_color: .52, .52, .52, 1
        bold: 1
        color: .0078,.67,.69,1
        font_size: 30
        size_hint: .2, .3333
        text: "HOME"
        pos_hint: {'x':0, 'y': 0}
        on_release: app.root.current = "main_screen_name"

    BoxLayout:
        orientation: 'vertical'
        Button:
            background_color: .52, .52, .52, 1
            bold: 1
            color: .0078,.67,.69,1
            font_size: 50
            text: "LOAD ROUTE"
            pos_hint: {'x': .2}
            size_hint: [.8, 1]
            on_release: app.root.current = "route_list_name"
            #on_press: root.check()
            on_press: root.check_files_to_load()
            on_release: root.check_for_usb()
            #on_release: root.load_routes()
        Button:
            background_color: .52, .52, .52, 1
            bold: 1
            color: .0078,.67,.69,1
            font_size: 50
            text: "SAVE ROUTE IN \n    DATA BASE"
            pos_hint: {'x': .2}
            size_hint: [.8, 1]
            on_release: app.root.current = "save_file_text_input_screen_name"

        Button:  
            background_color: .52, .52, .52, 1
            bold: 1
            color: .0078,.67,.69,1
            font_size: 50
            text: "SAVE ROUTE IN \n       USB DRIVE"
            pos_hint: {'x': .2}
            size_hint: [.8, 1]
            on_release: app.root.current = "file_list_to_save_usb_screen_name"
            on_press: root.check_save_routes()

        
        #Button:
        #    background_color: .52, .52, .52, 1
        #    bold: 1
        #    color: .0078,.67,.69,1
        #    font_size: 50
        #    text: root.update_val.dist_travel_2
        #    pos_hint: {'x': .2}
        #    size_hint: [.8, 1]
        
##############################################################
##############################################################

# Screen 4: Race Setup Screen
<Race_Setup_Screen>:
    canvas:
        Color:
            rgb: [.30, .30, .30]
        Rectangle:
            pos: self.pos
            size: self.size

    Button:
        background_color: .52, .52, .52, 1
        bold: 1
        color: .0078,.67,.69,1
        size_hint: .2, .5
        pos_hint: {"x": 0, "center_y": .5}
        font_size: 30
        text: "ROUTES \n      <-"
        pos_hint: {'x':0, 'y': .5}
        on_release: app.root.current = "route_input_screen_name"
    Button:
        background_color: .52, .52, .52, 1
        bold: 1
        color: .0078,.67,.69,1
        font_size: 30
        size_hint: .2, .5
        text: "HOME"
        pos_hint: {'x':0, 'y': 0}
        on_release: app.root.current = "main_screen_name"
        on_release: print("value: {}".format(app.message_selected))

    BoxLayout:
        orientation: 'vertical'
        Button:
            background_color: .52, .52, .52, 1
            pos_hint: {'x': .2}
            size_hint: [.8, .0]
        #    bold: 1
        #    color: .0078,.67,.69,1
        #    font_size: 50
        #    text: "TARGET SPEED: \n      " + root.update_val.speed_target_indicator + " MPH"
        #    pos_hint: {'x': .2}
        #    size_hint: [.8, 1]
        #    on_release: app.root.current = "input_target_speed_screen_name"
        Button:
            background_color: .52, .52, .52, 1
            disabled: root.update_val.hidePulseMeasure
            bold: 1
            color: .0078,.67,.69,1
            font_size: 100
            text: root.update_val.pulseCounter
            pos_hint: {'x': .2}
            size_hint: [.8, 1]
            on_press: root.start_record()
            on_release: root.detach()
            #on_press: root.start_record()
        Button:
            background_color: .52, .52, .52, 1
            disabled: root.update_val.hidePulseMeasure
            bold: 1
            color: .0078,.67,.69,1
            font_size: 100
            text: "STOP RECORD"
            pos_hint: {'x': .2}
            size_hint: [.8, 1]
            on_release: root.stop_record()
        
##############################################################
##############################################################

# Screen 6: Route List Screen
<Routes_List_Screen>:
    
    canvas:
        Color:
            rgb: [.30, .30, .30]
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: 'vertical'
        padding: 1
        Button:
            size_hint: [1, .1]
            background_color: .52, .52, .52, 1
            bold: 1
            color: .0078,.67,.69,1
            #font_size: 20
            font_size: 50
            text: root.update_val.loadRouteInList #'DATALOGGER'

        BoxLayout:
            orientation: 'horizontal'
            size_hint: [1, .2]
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text: 'BACK'
                on_release: app.root.current = "route_input_screen_name" #"race_setup_screen_name"
                on_press: root.uncheck()
            
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text: 'LOAD'
                #on_press: root.open_excel_file()
                #on_press: root.change_name()
                #on_press: root.get_file_to_load()

                on_release: root.uncheck()
                on_press: root.get_file_name_to_load()
                on_release: if (app.message_selected == 4): app.root.current = "screen_to_show_static_message"
                on_release: if (app.message_selected != 4): app.root.current = "screen_to_confirm_load"
                #on_press: root.show_popup() # user message: route was succesfully loaded
                #on_press: root.refresh_list()
                #on_release: app.root.current = "race_setup_screen_name"

            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text: 'DELETE'
                on_press: root.delete_file()
                on_release: if(app.message_selected == 3): app.root.current = "screen_to_show_static_message"
                on_release: if(app.message_selected != 3): app.root.current = "screen_to_confirm_delete"
                #on_release: app.root.current = "race_setup_screen_name"
                #on_press: root.refresh_list()

############################################################## 
##############################################################

<File_List_To_Save_Usb>:
    
    canvas:
        Color:
            rgb: [.30, .30, .30]
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: 'vertical'
        padding: 1
        Button:
            size_hint: [1, .1]
            background_color: .52, .52, .52, 1
            bold: 1
            color: .0078, .67, .69, 1
            #font_size: 20
            font_size: 45
            text: root.update_val.saveRouteInUSB #'SAVED ROUTES'#'NAME CAN BE ONLY LESS THAN 10 CHARACTERS' #'DATALOGGER'

        BoxLayout:
            orientation: 'horizontal'
            size_hint: [1, .2]
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text: 'BACK'
                on_release: app.root.current = "route_input_screen_name"#"race_setup_screen_name"
                on_press: root.uncheck()
                #on_press: root.refresh_list()
            
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text: 'SAVE'
                on_press: root.check_name()
                on_release: if(app.message_selected == 8): app.root.current = "screen_to_show_static_message"
                on_release: if(app.message_selected == 254): app.root.current = "confirm_save_in_usb"

            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text: 'DELETE'
                on_press: root.check_name()
                on_release: if(app.message_selected == 8): app.root.current = "screen_to_show_static_message"
                on_release: if(app.message_selected == 254): app.root.current = "confirm_delete_in_usb"

############################################################## 
##############################################################

# Target Speed Screen
<Input_Target_Speed_Screen>:
    target_speed: entry_target_speed
    canvas:
        Color:
            rgb: [.30, .30, .30]
        Rectangle:
            pos: self.pos
            size: self.size

    GridLayout:
        target_speed: entry_target_speed
        orientation: 'lr-tb'
        display: entry_target_speed
        rows: 6
        padding: 10
        spacing: 10

        BoxLayout:
            TextInput:
                id: entry_target_speed
                font_size: 75
                multiline: False
                hint_text: "Enter Target Speed"

        BoxLayout:
            spacing: 10
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"1"
                on_press: if len(entry_target_speed.text) < 6: entry_target_speed.text += self.text
                #on_press: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"2"
                on_press: if len(entry_target_speed.text) < 6: entry_target_speed.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"3"
                on_press: if len(entry_target_speed.text) < 6: entry_target_speed.text += self.text
        BoxLayout:
            spacing: 10
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"4"
                on_press: if len(entry_target_speed.text) < 6: entry_target_speed.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"5"
                on_press: if len(entry_target_speed.text) < 6: entry_target_speed.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"6"
                on_press: if len(entry_target_speed.text) < 6: entry_target_speed.text += self.text
        BoxLayout:
            spacing: 10
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"7"
                on_press: if len(entry_target_speed.text) < 6: entry_target_speed.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"8"
                on_press: if len(entry_target_speed.text) < 6: entry_target_speed.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"9"
                on_press: if len(entry_target_speed.text) < 6: entry_target_speed.text += self.text
        BoxLayout:
            spacing: 10
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"."
                on_press: if "." not in entry_target_speed.text: entry_target_speed.text += self.text

            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"0"
                on_press: if len(entry_target_speed.text) < 6: entry_target_speed.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"ERASE"
                on_press: entry_target_speed.text = ""
        BoxLayout:
            spacing: 10
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"BACK"
                on_release: app.root.current = "race_setup_screen_name"
                #on_press: root.t_speed()

            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"ENTER"
                on_release: if (app.message_selected == 14): app.root.current = "screen_to_show_static_message"
                on_release: if (app.message_selected != 14): app.root.current = "race_setup_screen_name"
                on_press: root.t_speed()
                on_press: if entry_target_speed.text == '' or entry_target_speed.text == '00' or entry_target_speed.text == '000': entry_target_speed.text = '0' 

##############################################################
##############################################################

# Screen 7: Keyboard
<Save_File_Text_Input_Screen>:
    save_text_file: entry
    canvas:
        Color:
            rgb: [.30, .30, .30]
        Rectangle:
            pos: self.pos
            size: self.size
    name: "calculator-setup"
    GridLayout:
        orientation: 'lr-tb'
        id: calculator
        display: entry
        rows: 5
        padding: 10
        spacing: 10

        BoxLayout:
            TextInput:
                id: entry
                font_size: 32
                multiline: False
                hint_text: "Enter name of file"
        BoxLayout:
            spacing: 10
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"1"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"2"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"3"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"4"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"5"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"6"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"7"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"8"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"9"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"0"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
        BoxLayout:
            spacing: 10
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"Q"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"W"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"E"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"R"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"T"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"Y"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"U"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"I"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"O"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"P"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
        BoxLayout:
            spacing: 10
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"A"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"S"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"D"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"F"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"G"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"H"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"J"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"K"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"L"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 18
                text:"ERASE"
                on_press: entry.text = ""

        BoxLayout:
            spacing: 10
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"Z"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"X"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"C"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"V"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"B"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"N"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 40
                text:"M"
                #on_press: entry.text += self.text
                on_press: if len(entry.text) < 45: entry.text += self.text
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 18
                text:"SPACE"
                #on_press: entry.text += " "
                on_press: if len(entry.text) < 45: entry.text += " "
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 18
                text:"BACK"
                on_press: app.root.current = "route_input_screen_name"
            Button:
                background_color: .52, .52, .52, 1
                bold: 1
                color: .0078,.67,.69,1
                font_size: 18
                text:"ENTER"
                #on_release: root.show_save_file_popup()
                #on_release: app.root.current = "route_input_screen_name"
                
                on_release: app.root.current = "screen_to_confirm_save" #"screen_to_show_static_message" #"save_with_usb_id"
                #on_press: root.save_file() HOLD IT 
                on_press: root.get_name_of_the_file()

##############################################################
##############################################################

<Confirmation_Screen_to_Save>:

    canvas:
        Color:
            rgb: [.30, .30, .30]
        Rectangle:
            pos: self.pos
            size: self.size
    Button:
        background_color: .52, .52, .52, 1
        bold: 1
        #color: .0078,.67,.69,1
        #color: 1,1,1,1
        size_hint: 1, .5
        pos_hint: {"x": 0, "y": .5}
        text: "DO YOU WANT TO SAVE \n       THIS ROUTE?"
        color: .0078,.67,.69,1
        font_size: 60
    BoxLayout:
        orientation: 'horizontal'
        Button:
            background_color: .52, .52, .52, 1
            #background_color: 0.015, 0.98, 0, 1
            #background_normal: ''
            bold: 1
            #color: 1,1,1,1
            color: .0078,.67,.69,1
            size_hint: 1, .5
            on_release: app.root.current = "screen_to_show_static_message"
            on_press: root.save_file()   # save the route and go back to r
            #on_press: root.delete_button()
            text: " YES "
            font_size: 120
        Button:
            background_color: .52, .52, .52, 1
            #background_color: .52, .52, .52, 1
            #background_color: 1, 0.16, 0.16, 1
            #background_normal: ''
            #background_color: 1, 0, 0, 1
            bold: 1
            #color: 1,1,1, 1
            color: .0078,.67,.69,1
            size_hint: 1, .5
            #size_hint: {'x': .5}
            #pos_hint: {"x": 0, "y": .5}
            on_release: app.root.current = "save_file_text_input_screen_name"
            text: " NO "
            font_size: 120


<Confirmation_Screen_To_Load>:
    canvas:
        Color:
            rgb: [.30, .30, .30]
        Rectangle:
            pos: self.pos
            size: self.size
    Button:
        background_color: .52, .52, .52, 1
        bold: 1
        #color: .0078,.67,.69,1
        #color: 1,1,1,1
        color: .0078,.67,.69,1
        size_hint: 1, .5
        pos_hint: {"x": 0, "y": .5}
        text: "DO YOU WANT TO LOAD \n          THIS ROUTE?"
        font_size: 60
    BoxLayout:
        orientation: 'horizontal'
        Button:
            background_color: .52, .52, .52, 1
            #background_color: 0.015, 0.98, 0, 1
            #background_normal: ''
            bold: 1
            #color: 1,1,1,1
            color: .0078,.67,.69,1
            size_hint: 1, .5
            #pos_hint: {"x": 0, "y": .5}
            #on_release: app.root.current = "route_input_screen_name"
            on_release: app.root.current = "screen_to_show_static_message"
            on_press: root.load_file()   # save the route and go back to r
            #on_press: root.delete_button()
            text: " YES "
            font_size: 120
        Button:
            background_color: .52, .52, .52, 1
            #background_color: 1, 0.16, 0.16, 1
            #background_normal: ''
            #background_color: 1, 0, 0, 1
            bold: 1
            #color: 1,1,1, 1
            color: .0078,.67,.69,1
            size_hint: 1, .5
            #size_hint: {'x': .5}
            #pos_hint: {"x": 0, "y": .5}
            on_release: if(app.message_selected != 255): app.root.current = "save_file_text_input_screen_name"
            on_release: if(app.message_selected == 255): app.root.current = "route_list_name"
            text: " NO "
            font_size: 120

<Confirmation_Screen_To_Delete>:    

    canvas:
        Color:
            rgb: [.30, .30, .30]
        Rectangle:
            pos: self.pos
            size: self.size
    Button:
        background_color: .52, .52, .52, 1
        bold: 1
        #color: .0078,.67,.69,1
        #color: 1,1,1,1
        color: .0078,.67,.69,1
        size_hint: 1, .5
        pos_hint: {"x": 0, "y": .5}
        text: "DO YOU WANT TO DELETE \n            THIS ROUTE?"
        font_size: 60
    BoxLayout:
        orientation: 'horizontal'
        Button:
            background_color: .52, .52, .52, 1
            #background_color: 0.015, 0.98, 0, 1
            #background_normal: ''
            bold: 1
            #color: 1,1,1,1
            color: .0078,.67,.69,1
            size_hint: 1, .5
            #pos_hint: {"x": 0, "y": .5}
            on_press: root.delete_spreadsheet()   # delete the route and go back to r
            on_release: if(app.message_selected == 7): app.root.current = "screen_to_show_static_message" #app.root.current = "screen_to_show_static_message"
            text: " YES "
            font_size: 120
        Button:
            background_color: .52, .52, .52, 1
            #background_color: 1, 0.16, 0.16, 1
            #background_normal: ''
            #background_color: 1, 0, 0, 1
            bold: 1
            #color: 1,1,1, 1
            color: .0078,.67,.69,1
            size_hint: 1, .5
            #size_hint: {'x': .5}
            #pos_hint: {"x": 0, "y": .5}
            on_release: if(app.message_selected != 255): app.root.current = "save_file_text_input_screen_name"
            on_release: if(app.message_selected == 255): app.root.current = "route_list_name"
            text: " NO "
            font_size: 120

<Confirmation_Save_List_Screen>:

    canvas:
        Color:
            rgb: [.30, .30, .30]
        Rectangle:
            pos: self.pos
            size: self.size
    Button:
        background_color: .52, .52, .52, 1
        bold: 1
        #color: .0078,.67,.69,1
        #color: 1,1,1,1
        color: .0078,.67,.69,1
        size_hint: 1, .5
        pos_hint: {"x": 0, "y": .5}
        text: "DO YOU WANT TO SAVE \n   THIS ROUTE IN USB?"
        font_size: 60
    BoxLayout:
        orientation: 'horizontal'
        Button:
            background_color: .52, .52, .52, 1
            #background_color: 0.015, 0.98, 0, 1
            #background_normal: ''
            bold: 1
            color: .0078,.67,.69,1
            size_hint: 1, .5
            on_press: root.save_file()
            on_release: if(app.message_selected == 9 or app.message_selected == 10): app.root.current = "screen_to_show_static_message" #app.root.current = "screen_to_show_static_message"
            text: " YES "
            font_size: 120
        Button:
            background_color: .52, .52, .52, 1
            #background_color: 1, 0.16, 0.16, 1
            #background_normal: ''
            #background_color: 1, 0, 0, 1
            bold: 1
            #color: 1,1,1, 1
            color: .0078,.67,.69,1
            size_hint: 1, .5
            #size_hint: {'x': .5}
            #pos_hint: {"x": 0, "y": .5}
            #on_release: if(app.message_selected != 255): app.root.current = "save_file_text_input_screen_name"
            on_release: if(app.message_selected == 254): app.root.current = "file_list_to_save_usb_screen_name"
            text: " NO "
            font_size: 120

<Confirmation_Delete_List_Screen>:

    canvas:
        Color:
            rgb: [.30, .30, .30]
        Rectangle:
            pos: self.pos
            size: self.size
    Button:
        background_color: .52, .52, .52, 1
        bold: 1
        #color: .0078,.67,.69,1
        #color: 1,1,1,1
        color: .0078,.67,.69,1
        size_hint: 1, .5
        pos_hint: {"x": 0, "y": .5}
        text: "DO YOU WANT TO DELETE \n            THIS ROUTE?"
        font_size: 60
    BoxLayout:
        orientation: 'horizontal'
        Button:
            background_color: .52, .52, .52, 1
            #background_color: 0.015, 0.98, 0, 1
            #background_normal: ''
            bold: 1
            color: .0078,.67,.69,1
            size_hint: 1, .5
            on_press: root.delete_spreadsheet()
            on_release: if(app.message_selected == 11): app.root.current = "screen_to_show_static_message" 
            text: " YES "
            font_size: 120
        Button:
            background_color: .52, .52, .52, 1
            #background_color: 1, 0.16, 0.16, 1
            #background_normal: ''
            #background_color: 1, 0, 0, 1
            bold: 1
            #color: 1,1,1, 1
            color: .0078,.67,.69,1
            size_hint: 1, .5
            #size_hint: {'x': .5}
            #pos_hint: {"x": 0, "y": .5}
            #on_release: if(app.message_selected != 255): app.root.current = "save_file_text_input_screen_name"
            on_release: if(app.message_selected != 11): app.root.current = "file_list_to_save_usb_screen_name"
            text: " NO "
            font_size: 120